(function(n){"use strict";function u(n,t){for(var r,u="",i=0;i<n.length;i++)r=n[i],t!=null&&(r=t[i]),u+="<option value='"+r+"'>"+n[i]+"<\/option>\n";return u}function i(n,t,i){for(var u="",f,r=n;r<=t;r++)f=i&&r<10?"0"+r:r,u+="<option value='"+r+"'>"+f+"<\/option>\n";return u}function r(i,r,u){n(t.container).addClass(r.tag).appendTo(i);i.children("."+r.tag).append(r.inputs);typeof u=="function"&&u()}var t={period:'<div class="cron-select-period"><label><\/label><select class="cron-period-select"><\/select><\/div>',startTime:'<div class="cron-input cron-start-time">Start time <select class="cron-clock-hour"><\/select>:<select class="cron-clock-minute"><\/select><\/div>',container:'<div class="cron-input"><\/div>',minutes:{tag:"cron-minutes",inputs:['<p>Every <select class="cron-minutes-select"><\/select> minutes(s)<\/p>']},hourly:{tag:"cron-hourly",inputs:['<p><input type="radio" name="hourlyType" value="every"> Every <select class="cron-hourly-select"><\/select> hour(s)<\/p>','<p><input type="radio" name="hourlyType" value="clock"> Every day at <select class="cron-hourly-hour"><\/select>:<select class="cron-hourly-minute"><\/select><\/p>']},daily:{tag:"cron-daily",inputs:['<p><input type="radio" name="dailyType" value="every"> Every <select class="cron-daily-select"><\/select> day(s)<\/p>','<p><input type="radio" name="dailyType" value="clock"> Every week day<\/p>']},weekly:{tag:"cron-weekly",inputs:['<p><input type="checkbox" name="dayOfWeekMon"> Monday  <input type="checkbox" name="dayOfWeekTue"> Tuesday  <input type="checkbox" name="dayOfWeekWed"> Wednesday  <input type="checkbox" name="dayOfWeekThu"> Thursday<\/p>','<p><input type="checkbox" name="dayOfWeekFri"> Friday  <input type="checkbox" name="dayOfWeekSat"> Saturday  <input type="checkbox" name="dayOfWeekSun"> Sunday<\/p>']},monthly:{tag:"cron-monthly",inputs:['<p><input type="radio" name="monthlyType" value="byDay"> Day <select class="cron-monthly-day"><\/select> of every <select class="cron-monthly-month"><\/select> month(s)<\/p>','<p><input type="radio" name="monthlyType" value="byWeek"> The <select class="cron-monthly-nth-day"><\/select> <select class="cron-monthly-day-of-week"><\/select> of every <select class="cron-monthly-month-by-week"><\/select> month(s)<\/p>']},yearly:{tag:"cron-yearly",inputs:['<p><input type="radio" name="yearlyType" value="byDay"> Every <select class="cron-yearly-month"><\/select> <select class="cron-yearly-day"><\/select><\/p>','<p><input type="radio" name="yearlyType" value="byWeek"> The <select class="cron-yearly-nth-day"><\/select> <select class="cron-yearly-day-of-week"><\/select> of <select class="cron-yearly-month-by-week"><\/select><\/p>']}},a=u(["Minutes","Hourly","Daily","Weekly","Monthly","Yearly"]),v=i(1,60),y=i(1,24),p=i(1,100),f=i(0,59,!0),e=i(0,23,!0),o=i(1,31),s=u(["January","February","March","April","May","June","July","August","September","October","November","December"],[1,2,3,4,5,6,7,8,9,10,11,12]),h=i(1,12),c=u(["First","Second","Third","Forth"],[1,2,3,4]),l=u(["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],["MON","TUE","WED","THU","FRI","SAT","SUN"]),w={periodSelect:function(){var e=n(this).val(),t=n(this).parent(),i,r,u,f;t.siblings("div.cron-input").hide();t.siblings().find("select option").removeAttr("selected");t.siblings().find("select option:first").attr("selected","selected");t.siblings("div.cron-start-time").show();t.siblings("div.cron-start-time").children("select.cron-clock-hour").val("12");switch(e){case"Minutes":t.siblings("div.cron-minutes").show().find("select.cron-minutes-select").val("1");t.siblings("div.cron-start-time").hide();break;case"Hourly":i=t.siblings("div.cron-hourly");i.show().find("input[name=hourlyType][value=every]").prop("checked",!0);i.find("select.cron-hourly-hour").val("12");t.siblings("div.cron-start-time").hide();break;case"Daily":r=t.siblings("div.cron-daily");r.show().find("input[name=dailyType][value=every]").prop("checked",!0);break;case"Weekly":t.siblings("div.cron-weekly").show().find("input[type=checkbox]").prop("checked",!1);break;case"Monthly":u=t.siblings("div.cron-monthly");u.show().find("input[name=monthlyType][value=byDay]").prop("checked",!0);break;case"Yearly":f=t.siblings("div.cron-yearly");f.show().find("input[name=yearlyType][value=byDay]").prop("checked",!0)}}};n.cronBuilder=function(i,u){var b=this;b.$el=n(i);b.el=i;b.$el.data("cronBuilder",b);b.init=function(){b.options=n.extend({},n.cronBuilder.defaultOptions,u);b.$el.append(t.period);b.$el.find("div.cron-select-period label").text(b.options.selectorLabel);b.$el.find("select.cron-period-select").append(a).bind("change",w.periodSelect);r(b.$el,t.minutes,function(){b.$el.find("select.cron-minutes-select").append(v)});r(b.$el,t.hourly,function(){b.$el.find("select.cron-hourly-select").append(y);b.$el.find("select.cron-hourly-hour").append(e);b.$el.find("select.cron-hourly-minute").append(f)});r(b.$el,t.daily,function(){b.$el.find("select.cron-daily-select").append(p)});r(b.$el,t.weekly);r(b.$el,t.monthly,function(){b.$el.find("select.cron-monthly-day").append(o);b.$el.find("select.cron-monthly-month").append(h);b.$el.find("select.cron-monthly-nth-day").append(c);b.$el.find("select.cron-monthly-day-of-week").append(l);b.$el.find("select.cron-monthly-month-by-week").append(h)});r(b.$el,t.yearly,function(){b.$el.find("select.cron-yearly-month").append(s);b.$el.find("select.cron-yearly-day").append(o);b.$el.find("select.cron-yearly-nth-day").append(c);b.$el.find("select.cron-yearly-day-of-week").append(l);b.$el.find("select.cron-yearly-month-by-week").append(s)});b.$el.append(t.startTime);b.$el.find("select.cron-clock-hour").append(e);b.$el.find("select.cron-clock-minute").append(f);typeof b.options.onChange=="function"&&b.$el.find("select, input").change(function(){b.options.onChange(b.getExpression())});b.$el.find("select.cron-period-select").triggerHandler("change")};b.getExpression=function(){var i="?",u="*",r="*",e=b.$el.find("select.cron-clock-minute").val(),f=b.$el.find("select.cron-clock-hour").val(),l=b.$el.find("select.cron-period-select").val(),s,h,c,t,o,n;switch(l){case"Minutes":n=b.$el.find("div.cron-minutes");s=n.find("select.cron-minutes-select").val();e=s>1?"0/"+s:"*";f="*";break;case"Hourly":n=b.$el.find("div.cron-hourly");n.find("input[name=hourlyType][value=every]").is(":checked")?(e=0,f="*",h=n.find("select.cron-hourly-select").val(),h>1&&(f="0/"+h)):(e=n.find("select.cron-hourly-minute").val(),f=n.find("select.cron-hourly-hour").val());break;case"Daily":n=b.$el.find("div.cron-daily");n.find("input[name=dailyType][value=every]").is(":checked")?(c=n.find("select.cron-daily-select").val(),c>1&&(r="1/"+c)):(r="?",i="MON-FRI");break;case"Weekly":n=b.$el.find("div.cron-weekly");t=[];n.find("input[name=dayOfWeekMon]").is(":checked")&&t.push("MON");n.find("input[name=dayOfWeekTue]").is(":checked")&&t.push("TUE");n.find("input[name=dayOfWeekWed]").is(":checked")&&t.push("WED");n.find("input[name=dayOfWeekThu]").is(":checked")&&t.push("THU");n.find("input[name=dayOfWeekFri]").is(":checked")&&t.push("FRI");n.find("input[name=dayOfWeekSat]").is(":checked")&&t.push("SAT");n.find("input[name=dayOfWeekSun]").is(":checked")&&t.push("SUN");i="*";r="?";t.length<7&&t.length>0&&(i=t.join(","));break;case"Monthly":n=b.$el.find("div.cron-monthly");n.find("input[name=monthlyType][value=byDay]").is(":checked")?(u="*",o=n.find("select.cron-monthly-month").val(),r=n.find("select.cron-monthly-day").val(),i="?"):(i=n.find("select.cron-monthly-day-of-week").val()+"#"+n.find("select.cron-monthly-nth-day").val(),o=n.find("select.cron-monthly-month-by-week").val(),r="?");o>1&&(u="1/"+o);break;case"Yearly":n=b.$el.find("div.cron-yearly");n.find("input[name=yearlyType][value=byDay]").is(":checked")?(r=n.find("select.cron-yearly-day").val(),u=n.find("select.cron-yearly-month").val(),i="?"):(i=n.find("select.cron-yearly-day-of-week").val()+"#"+n.find("select.cron-yearly-nth-day").val(),u=n.find("select.cron-yearly-month-by-week").val(),r="?")}return[0,e,f,r,u,i,"*"].join(" ")};b.init()};n.cronBuilder.defaultOptions={selectorLabel:"Select period: "};n.fn.cronBuilder=function(t){return this.each(function(){new n.cronBuilder(this,t)})}})(jQuery);